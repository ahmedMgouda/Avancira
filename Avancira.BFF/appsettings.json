{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.AspNetCore.Authentication": "Information",
      "Duende": "Information"
    }
  },
  "AllowedHosts": "*",

  "ConnectionStrings": {
    "Redis": ""
    // Production: "your-redis-server:6379,password=xxx,ssl=true,abortConnect=false"
  },

  "Auth": {
    "Authority": "https://localhost:9100",
    "ClientId": "bff-client",
    "ClientSecret": "dev-bff-secret",
    "RequireHttpsMetadata": true,
    "DefaultRedirectUrl": "https://localhost:4200/"
  },

  "Cookie": {
    "Name": ".Avancira.Auth",
    "ExpirationHours": 8
  },

  "Cors": {
    "AllowedOrigins": [
      "https://localhost:4200",
      "http://localhost:4200"
    ]
  },

  "EssentialClaims": [ "sub", "sid" ],

  "ReverseProxy": {
    "Routes": {
      "api-route": {
        "ClusterId": "api-cluster",
        "Match": {
          "Path": "/bff/api/{**catch-all}"
        },
        "Transforms": [
          { "PathRemovePrefix": "/bff" }
        ]
      },
      "signalr-route": {
        "ClusterId": "api-cluster",
        "Match": {
          "Path": "/bff/notification/{**catch-all}"
        },
        "Transforms": [
          { "PathRemovePrefix": "/bff" }
        ]
      }
    },
    "Clusters": {
      "api-cluster": {
        "Destinations": {
          "primary": {
            "Address": "https://localhost:9000"
          }
        },
        "HttpRequest": {
          "Timeout": "00:01:40"
        }
      }
    }
  }
,
  "HealthCheck": {
    "Redis": {
      "Enabled": false,
      "FailureStatus": "Degraded"
    },
    "Memory": {
      "Enabled": true,
      "ThresholdMb": 256
    },
    "Downstream": {
      "Api": {
        "Enabled": true,
        "Url": "https://localhost:9000",
        "HealthPath": "health/ready",
        "Timeout": 5,
        "FailureStatus": "Unhealthy"
      },
      "Auth": {
        "Enabled": true,
        "Url": "https://localhost:9100",
        "HealthPath": "health/ready",
        "Timeout": 5,
        "FailureStatus": "Unhealthy"
      }
    }
  }
}
