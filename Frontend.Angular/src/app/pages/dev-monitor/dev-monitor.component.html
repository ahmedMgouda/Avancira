<div class="dev-monitor">
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <header class="header">
    <div class="header-title">
      <h1>ğŸ§© Developer Monitor</h1>
      <span class="version-badge">v1.0.0</span>
    </div>

    <div class="header-actions">
      <button class="btn btn-sm btn-secondary" (click)="togglePause()">
        {{ isPaused() ? 'â–¶ï¸ Resume' : 'â¸ï¸ Pause' }}
      </button>

      <button class="btn btn-sm btn-info" (click)="exportLogs()" [disabled]="!hasFilteredLogs()">
        ğŸ“¥ Export
      </button>

      <button class="btn btn-sm btn-danger" (click)="clearLogs()" [disabled]="!hasLogs()">
        ğŸ—‘ï¸ Clear
      </button>
    </div>
  </header>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• METRICS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="metrics">
    <h2>ğŸ“Š Metrics</h2>
    <div class="metrics-grid">
      <div class="metric-card">
        <span>ğŸŒ</span>
        <div>
          <div class="metric-label">Requests</div>
          <div class="metric-value">{{ metrics().totalRequests }}</div>
        </div>
      </div>

      <div class="metric-card">
        <span>âŒ</span>
        <div>
          <div class="metric-label">Errors</div>
          <div class="metric-value error">{{ metrics().totalErrors }}</div>
        </div>
      </div>

      <div class="metric-card">
        <span>ğŸŒ</span>
        <div>
          <div class="metric-label">Slow</div>
          <div class="metric-value warning">{{ metrics().slowRequests }}</div>
        </div>
      </div>

      <div class="metric-card">
        <span>ğŸ“ˆ</span>
        <div>
          <div class="metric-label">Error Rate</div>
          <div class="metric-value">{{ metrics().errorRate }}</div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FILTERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="filters">
    <div class="filters-header">
      <h2>ğŸ” Filters</h2>
      @if (isFiltering()) {
      <button class="btn btn-sm btn-link" (click)="clearFilters()">Clear</button>
      }
    </div>

    <div class="filters-controls">
      <!-- Search -->
      <div class="filter-group search">
        <input type="text" class="input search-box" placeholder="Search logs (message, correlation ID, URL, context...)"
          [value]="searchTerm()" (input)="onSearchInput($any($event.target).value)" />
      </div>

      <!-- Method -->
      <div class="filter-group">
        <select class="select" title="Filter by HTTP method" [value]="methodFilter()"
          (change)="onMethodFilterChange($any($event.target).value)">
          <option value="all">All Methods</option>
          @for (m of availableMethods(); track m) {
          <option [value]="m">{{ m }}</option>
          }
        </select>
      </div>

      <!-- Status -->
      <div class="filter-group">
        <select class="select" title="Filter by HTTP status" [value]="statusFilter()"
          (change)="onStatusFilterChange($any($event.target).value)">
          <option value="all">All Statuses</option>
          @for (s of availableStatuses(); track s) {
          <option [value]="s">{{ s }}</option>
          }
        </select>
      </div>

      <!-- Level -->
      <div class="filter-group">
        <select class="select" title="Filter by level" [value]="levelFilter()"
          (change)="onLevelFilterChange($any($event.target).value)">
          @for (level of logLevels(); track level.value) {
          <option [value]="level.value">{{ level.label }} ({{ level.count }})</option>
          }
        </select>
      </div>

      <!-- Max Logs -->
      <div class="filter-group">
        <select class="select" title="Max logs to display" [value]="maxLogs()"
          (change)="onMaxLogsChange($any($event.target).value)">
          @for (num of [50,100,200,500,1000]; track num) {
          <option [value]="num">{{ num }}</option>
          }
        </select>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOG TABLE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="logs">
    <div class="logs-header">
      <h2>ğŸªµ Logs</h2>
      <span>Showing {{ filteredLogs().length }} / {{ logs().length }}</span>
    </div>

    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th>Time</th>
            <th>Level</th>
            <th>Message</th>
            <th>Context</th>
          </tr>
        </thead>
        <tbody>
          @if (!hasLogs()) {
          <tr>
            <td colspan="5" class="empty-state">ğŸ“­ No Logs</td>
          </tr>
          } @else if (!hasFilteredLogs()) {
          <tr>
            <td colspan="5" class="empty-state">ğŸ” No Matching Logs</td>
          </tr>
          } @else {
          @for (log of filteredLogs(); track trackByLog($index, log)) {
          <tr [class]="getLevelClass(log.level)" (click)="selectLog(log)">
            <td>{{ formatTimestamp(log.timestamp) }}</td>
            <td>{{ getLevelIcon(log.level) }} {{ formatLevel(log.level) }}</td>
            <td>{{ truncateMessage(log.message, 120) }}</td>
            <td>{{ log.context ? 'ğŸ“„' : 'â€”' }}</td>
          </tr>
          }
          }
        </tbody>
      </table>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOG DETAILS MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  @if (selectedLog()) {
  <div class="modal-overlay" (click)="closeLogDetails()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <header class="modal-header">
        <h3>ğŸ“‹ Log Details</h3>
        <button class="btn-close" (click)="closeLogDetails()">âœ•</button>
      </header>

      <div class="modal-body">
        <div class="detail"><strong>Level:</strong> {{ formatLevel(selectedLog()!.level) }}</div>
        <div class="detail"><strong>Time:</strong> {{ formatTimestamp(selectedLog()!.timestamp) }}</div>
        <div class="detail"><strong>Message:</strong> {{ selectedLog()!.message }}</div>

        @if (selectedLog()!.correlationId) {
        <div class="detail"><strong>Correlation:</strong> {{ selectedLog()!.correlationId }}</div>
        }

        @if (selectedLog()!.url) {
        <div class="detail"><strong>URL:</strong> {{ selectedLog()!.url }}</div>
        }

        @if (selectedLog()!.context) {
        <div class="detail"><strong>Context:</strong></div>
        <pre class="context-json">{{ formatContext(selectedLog()!.context) }}</pre>
        }
      </div>

      <footer class="modal-footer">
        <button class="btn btn-sm btn-secondary" (click)="copyLogToClipboard(selectedLog()!)">
          ğŸ“‹ Copy
        </button>
        <button class="btn btn-sm btn-primary" (click)="closeLogDetails()">Close</button>
      </footer>
    </div>
  </div>
  }

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <footer class="footer">
    <div class="footer-info">
      <span>Last updated: {{ formatTimestamp(lastUpdated()) }}</span>
      <span>â€¢</span>
      <span>Logs: {{ allLogs().length }} (showing {{ logs().length }})</span>
      <span>â€¢</span>
      <span>
        <span class="status-dot" [class.paused]="isPaused()"></span>
        {{ isPaused() ? 'Paused' : 'Live' }}
      </span>
    </div>
  </footer>
</div>